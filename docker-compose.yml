version: '2'
services:


    phpfpm:
        build:
            context: ./
            dockerfile: ./docker/php-fpm/phpfpm.docker
        links:
          - mysql:mysql
        ports:
          - "9001:9000"
        volumes:
          - ./:/var/www/website

    nginx:
        image: tutum/nginx
        ports:
          - "80:80"
        volumes:
          - ./docker/nginx/default:/etc/nginx/conf.d/default.conf

          - ./docker/nginx/logs/nginx-error.log:/var/log/nginx/error.log
          - ./docker/nginx/logs/nginx-access.log:/var/log/nginx/access.log
          - ./public/:/var/www/website/public

    mysql:
        image: mariadb
        environment:
          MYSQL_TCP_PORT: 3306
          MYSQL_ROOT_PASSWORD: root

    phpmyadmin:
        image: phpmyadmin/phpmyadmin
        depends_on:
          - mysql
        links:
            - mysql:mysql
        ports:
            - 8183:80
        environment:
          PMA_HOST: mysql
          PMA_PORT: 3306
          MYSQL_ROOT_PASSWORD: root
    redis:
        image: redis

